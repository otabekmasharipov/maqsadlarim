<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aniq Maqsadli Reja - Dashboard</title>
    <style>
        :root {
            --bg-color: #0f172a;
            --card-bg: #1e293b;
            --accent-color: #4ade80;
            --university-color: #38bdf8;
            --home-color: #fb7185;
            --text-color: #f8fafc;
        }
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Segoe UI', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        .container { max-width: 850px; width: 100%; text-align: center; }
        .card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            margin-bottom: 20px;
            border: 1px solid #334155;
        }
        .header-card { border-top: 5px solid var(--accent-color); }
        .date-display { font-size: 1.4rem; color: var(--accent-color); font-weight: bold; }
        .time-row { 
            display: flex; align-items: center; padding: 12px; 
            border-bottom: 1px solid #334155; text-align: left;
        }
        .time-label { min-width: 120px; font-weight: bold; color: #fbbf24; }
        .task-label { flex-grow: 1; margin-left: 10px; }
        .cat-js { color: var(--accent-color); }
        .cat-uni { color: var(--university-color); }
        .cat-home { color: var(--home-color); }
        
        input[type="checkbox"] { transform: scale(1.4); margin-right: 15px; cursor: pointer; }
        
        .check-btn {
            background: var(--accent-color);
            color: #0f172a;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 20px;
            width: 100%;
            transition: 0.3s;
        }
        .check-btn:hover { opacity: 0.8; }
        
        #result-box {
            margin-top: 20px;
            padding: 20px;
            border-radius: 15px;
            display: none;
            background: #334155;
            text-align: left;
            line-height: 1.6;
        }
        .missed { color: #f87171; }
        .done { color: var(--accent-color); }
    </style>
</head>
<body>
<a href="old_plan.html" style="color: #38bdf8; text-decoration: none; font-size: 0.9rem;">
   ‚¨ÖÔ∏è 2027-yil maqsadlariga o'tish
</a>
<div class="container">
    <div class="card header-card">
        <div id="current-date" class="date-display">Yuklanmoqda...</div>
        <div id="day-end" style="color: #fbbf24; margin: 10px 0;">Kun tugashiga: 00:00:00</div>
        <div id="quote-display" style="font-style: italic; color: #94a3b8; min-height: 50px;"></div>
    </div>

    <div class="card">
        <h3>üìã Bugungi Batafsil Reja</h3>
        <div id="schedule-content"></div>
        
        <button class="check-btn" onclick="checkDailyStats()">üìä Kunlik sarhisobni ko'rish</button>
        
        <div id="result-box"></div>
    </div>
</div>

<script>
    const quotes = [
        "\"Alloh sabrlilar bilan birgadir.\" (Baqara, 153)",
        "\"Albatta, qiyinchilik bilan birga yengillik bordir.\" (Sharh, 6)",
        "\"Vaqt qilichdir, agar sen uni kesmasang, u seni kesadi.\"",
        "\"Ilm talab qilish har bir musulmonga farzdir.\" (Hadis)",
        "\"Allohga tavakkal qiling, U kifoya qiluvchidir.\"",
        "\"Sizga berilgan narsa dunyo matohidir, Allohning huzuridagi narsa yaxshiroqdir.\"",
        "\"Harakat sizdan, baraka Allohdan.\"",
        "\"Ikki ne'mat borki, ko'p odamlar unga aldanib qolishadi: sog'lik va bo'sh vaqt.\"",
        "\"Bugungi ishni ertaga qo'yma.\"",
        "\"Rizqingizni haloldan izlang, Alloh baraka beradi.\""
    ];

    const workday = [
        { id: 1, time: "06:30 - 07:15", task: "Bomdod namozi va Ruhiy quvvat", cat: "" },
        { id: 2, time: "07:15 - 08:30", task: "Oltin soat: JavaScript (Focus)", cat: "cat-js" },
        { id: 3, time: "08:30 - 09:30", task: "Nonushta va Uy ishlari (Yordam)", cat: "cat-home" },
        { id: 4, time: "09:30 - 11:00", task: "Frontend: Amaliyot", cat: "cat-js" },
        { id: 5, time: "11:00 - 12:00", task: "Dam olish (Kitob yoki hordiq)", cat: "" },
        { id: 6, time: "12:00 - 13:00", task: "Peshin namozi va Tayyorgarlik", cat: "" },
        { id: 7, time: "13:00 - 14:00", task: "O'qishga borish (Inglizcha audio)", cat: "cat-uni" },
        { id: 8, time: "14:00 - 18:20", task: "Universitet darslari", cat: "cat-uni" },
        { id: 9, time: "18:20 - 19:30", task: "Qaytish va Shom namozi", cat: "cat-uni" },
        { id: 10, time: "19:30 - 20:30", task: "Kechki ovqat va Oila bilan dam", cat: "cat-home" },
        { id: 11, time: "20:30 - 21:30", task: "Ingliz tili (Sintaksis)", cat: "cat-js" },
        { id: 12, time: "21:30 - 22:30", task: "Xufton va Kunlik xulosa", cat: "" }
    ];

    function init() {
        // 1. Motivatsiyani o'zgartirish
        document.getElementById('quote-display').innerText = quotes[Math.floor(Math.random() * quotes.length)];

        // 2. Sanani chiqarish
        const now = new Date();
        document.getElementById('current-date').innerText = now.toLocaleDateString('uz-UZ', { weekday: 'long', month: 'long', day: 'numeric' });

        // 3. Rejani yuklash
        let html = "";
        workday.forEach(item => {
            html += `
            <div class="time-row">
                <input type="checkbox" id="check-${item.id}" onchange="saveStatus(${item.id})">
                <div class="time-label">${item.time}</div>
                <div class="task-label ${item.cat}" id="label-${item.id}">${item.task}</div>
            </div>`;
        });
        document.getElementById('schedule-content').innerHTML = html;

        // 4. Avvalgi belgilanganlarni yuklash (Local Storage)
        loadStatus();
    }

    function saveStatus(id) {
        const isChecked = document.getElementById(`check-${id}`).checked;
        localStorage.setItem(`task-${id}`, isChecked);
    }

    function loadStatus() {
        workday.forEach(item => {
            const saved = localStorage.getItem(`task-${item.id}`);
            if (saved === "true") {
                document.getElementById(`check-${item.id}`).checked = true;
            }
        });
    }

    function checkDailyStats() {
        let doneCount = 0;
        let missedTasks = [];
        
        workday.forEach(item => {
            const isChecked = document.getElementById(`check-${item.id}`).checked;
            if (isChecked) {
                doneCount++;
            } else {
                missedTasks.push(item.task);
            }
        });

        const resultBox = document.getElementById('result-box');
        resultBox.style.display = "block";
        
        let report = `<b>Natija:</b> Bugun ${workday.length} ta vazifadan <span class="done">${doneCount} tasini</span> bajardingiz. <br><br>`;
        
        if (missedTasks.length > 0) {
            report += `<b>Bajarilmaganlar:</b> <br>`;
            missedTasks.forEach(task => {
                report += `<span class="missed">‚ùå ${task}</span> <br>`;
            });
            report += `<br><i>Maslahat: Ertaga bu ishlarni birinchi bo'lib bitiring!</i>`;
        } else {
            report += `<span class="done">MashaAlloh! Bugun barcha rejalarni bajardingiz! üöÄ</span>`;
        }

        resultBox.innerHTML = report;
    }

    function updateTimer() {
        const now = new Date();
        const end = new Date();
        end.setHours(23, 59, 59);
        const diff = end - now;
        const h = Math.floor(diff / 3600000);
        const m = Math.floor((diff % 3600000) / 60000);
        const s = Math.floor((diff % 60000) / 1000);
        document.getElementById('day-end').innerText = `Bugun tugashiga: ${h}s ${m}m ${s}s qoldi`;
    }

    setInterval(updateTimer, 1000);
    window.onload = init;
</script>

</body>
</html>

